# Test configuration for bitbucket pipelines.

definitions:
  services:
    ftrack:
      image:
        name: ftrackdocker/test-server:latest
        username: $DOCKER_HUB_USERNAME
        password: $DOCKER_HUB_PASSWORD
        email: $DOCKER_HUB_EMAIL
pipelines:
  default:
    - parallel:  
      - step:
          name: run tests against python 2.7.x
          image: python:2.7
          caches:
            - pip
          services:
            - ftrack
          script:
            - sleep 10
            - python setup.py test
      - step:
          name: run tests against python 3.6.x
          image: python:3.6
          caches:
            - pip
          services:
            - ftrack
          script:
            - sleep 10
            - python setup.py test